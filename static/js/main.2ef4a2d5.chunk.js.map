{"version":3,"sources":["views/ItemDetails.js","components/TokenAttribute.js","assets/images/loading.gif","components/Navbar.js","lib/erc20.js","components/ConnectWallet.js","components/Footer.js","components/Item.js","components/ItemList.js","views/Home.js","App.js","reportWebVitals.js","index.js","lib/alchemyClient.js","lib/staking.js","lib/erc721.js"],"names":["ItemDetails","accountConnected","id","useParams","useState","showMessage","setShowMessage","headerMessage","setHeaderMessage","metadata","setMetadata","owner","setOwner","owned","setOwned","staked","setStaked","reward","setReward","loaded","setLoaded","inputErrors","setInputErrors","modalActionsDisabled","setModalActionsDisabled","stakeCoinModalVisibility","setStakeCoinModalVisibility","unstakeCoinModalVisibility","setUnstakeCoinModalVisibility","unlockCoinModalVisibility","setUnlockCoinModalVisibility","loadCoinMetadata","getTokenURI","then","data","base64ToString","Buffer","from","substring","toString","meta","JSON","parse","image","replace","process","refreshScreenData","isStaked","st","displayMessage","message","extractMessage","startIndex","indexOf","userMessage","length","useEffect","getOwnerOf","isOwned","calculateStakeReward","rw","className","variant","show","onClose","dismissible","to","xmlns","width","height","fill","viewBox","d","type","onClick","alchemyClient","nft","getNftMetadata","Math","floor","Date","now","timeLastUpdated","refreshNftMetadata","disabled","fillRule","style","backgroundColor","background_color","placeholderSrc","LoadingImage","src","alt","name","description","slice","toUpperCase","attributes","map","attribute","index","role","onHide","centered","Header","closeButton","Title","Body","Footer","stake","val","withdrawStake","emergencyWithdrawStake","TokenAttribute","trait_type","value","Navbar","connectWallet","polygonProvider","ethers","providers","Web3Provider","window","ethereum","signer","getSigner","contract","Contract","abi","getOwnedEmojis","address","balanceOf","ConnectWallet","onAccountConnect","web3Modal","setWeb3Modal","setAddress","emojis","setEmojis","emojiTokens","setEmojiTokens","setShow","connect","addListeners","provider","getAddress","userAddress","clearCachedProvider","setBalances","round","getOwnedTokens","web3ModalProvider","on","accounts","location","reload","chainId","newWeb3Modal","Web3Modal","cacheProvider","network","cachedProvider","Toast","delay","autohide","showBalances","Item","token","setMetdata","navigate","useNavigate","rawMetadata","tokenId","ItemList","tokens","totalCount","pagedTokens","setPagedTokens","paginationItem","setPaginationItems","fetchPage","e","latestPage","target","innerText","parseInt","updatePagination","pagesCount","ceil","items","number","push","Pagination","active","Home","ownedTokens","setOwnedTokens","setTotalCount","fetchData","pageKey","getNftsForOwner","contractAddresses","r","filtered","ownedNfts","filter","some","item","App","setAccountConnected","path","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","render","StrictMode","settings","apiKey","Network","MATIC_MAINNET","alchemy","Alchemy","waitForTransaction","hash","console","error","tokenURI","ownerOf"],"mappings":"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","file":"static/js/main.2ef4a2d5.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { isStaked, calculateStakeReward, stake, withdrawStake, emergencyWithdrawStake} from \"../lib/staking\";\nimport { getTokenURI, getOwnerOf } from \"../lib/erc721\";\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\nimport Alert from 'react-bootstrap/Alert'\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport TokenAttribute from \"../components/TokenAttribute\";\nimport LoadingImage from \"../assets/images/loading.gif\";\nimport alchemyClient from \"../lib/alchemyClient\";\nimport \"../assets/css/ItemDetails.css\";\n\nfunction ItemDetails( { accountConnected } ) {\n  const { id } = useParams();\n  const [ showMessage, setShowMessage ] = useState(false);\n  const [ headerMessage, setHeaderMessage ] = useState(null);  \n  const [ metadata, setMetadata ] = useState(null);\n  const [ owner, setOwner ] = useState(null);\n  const [ owned, setOwned ] = useState(false);\n  const [ staked, setStaked ] = useState(false);\n  const [ reward, setReward ] = useState(null);\n  const [ loaded, setLoaded ] = useState(false);\n  const [ inputErrors, setInputErrors ] = useState(\"\");\n  const [ modalActionsDisabled, setModalActionsDisabled ] = useState(false);\n  const [ stakeCoinModalVisibility, setStakeCoinModalVisibility] = useState(false);\n  const [ unstakeCoinModalVisibility, setUnstakeCoinModalVisibility] = useState(false);\n  const [ unlockCoinModalVisibility, setUnlockCoinModalVisibility] = useState(false);\n  \n  useEffect(() => {\n    loadCoinMetadata();\n    getOwnerOf(id).then(data => {\n      setOwner(data);\n      let isOwned = data != null && data === accountConnected;\n      setOwned(isOwned);\n      if (isOwned) {\n        isStaked(id).then(st => {\n          setStaked(st);\n          if (st) calculateRewards();\n        });\n      }\n    });\n\n  }, [id, accountConnected]);\n  \n  function loadCoinMetadata() {\n    getTokenURI(id).then(data => {\n      let base64ToString = Buffer.from(data.substring(29), \"base64\").toString();\n      let meta = JSON.parse(base64ToString);\n\n      if (meta?.image){\n        meta.image = meta.image.replace(\"ipfs://\", process.env.REACT_APP_IPFS_GATEWAY);\n      }\n      setMetadata(meta);\n      setLoaded(true);      \n    });\n  }\n\n  function calculateRewards() {\n    calculateStakeReward(id).then(rw => setReward(rw / 1000000000000000000));\n  }\n\n  // stake Modal ----------------------------\n\n  function handleShowStakeItemModalBtn() {\n      setInputErrors(\"\");\n      setStakeCoinModalVisibility(true);\n      setModalActionsDisabled(false);\n  }\n\n  function stakeItem(){\n    setInputErrors(\"\");\n    setModalActionsDisabled(true);\n    stake(id).then(val => {\n      if (val === \"1\"){\n        setStakeCoinModalVisibility(false);\n        displayMessage(\"The Coin was staked Successfully!\");\n        refreshScreenData();\n      } else {\n        setInputErrors(extractMessage(val?.message));\n        setModalActionsDisabled(false);\n      }\n    });\n  }\n\n  // unstake Modal --------------------------\n\n  function handleShowUnstakeItemModalBtn() {\n    setInputErrors(\"\");\n    setUnstakeCoinModalVisibility(true);\n    setModalActionsDisabled(false);\n  }\n\n  function unstakeItem(){\n    setInputErrors(\"\");\n    setModalActionsDisabled(true);\n    withdrawStake(id).then(val => {\n      if (val === \"1\"){\n        setUnstakeCoinModalVisibility(false);\n        displayMessage(\"The Coin was unstaked Successfully!\");\n        refreshScreenData();\n      } else {\n        setInputErrors(extractMessage(val?.message));\n        setModalActionsDisabled(false);\n      }\n    });\n  }\n\n  // unlock Modal --------------------------\n\n  function handleShowUnlockItemModalBtn() {\n    setInputErrors(\"\");\n    setUnlockCoinModalVisibility(true);\n    setModalActionsDisabled(false);\n  }\n\n  function unlockItem(){\n    setInputErrors(\"\");\n    setModalActionsDisabled(true);\n    emergencyWithdrawStake(id).then(val => {\n      if (val === \"1\"){\n        setUnlockCoinModalVisibility(false);\n        displayMessage(\"The Coin was unlocked Successfully!\");\n        refreshScreenData();\n      } else {\n        setInputErrors(extractMessage(val?.message));\n        setModalActionsDisabled(false);\n      }\n    });\n  }\n\n  function refreshScreenData() {\n    loadCoinMetadata();\n    isStaked(id).then(st => { setStaked(st); });\n    setReward(0);\n  }\n\n  function refreshMetadata() {\n    alchemyClient.nft.getNftMetadata(process.env.REACT_APP_ERC721_TOKEN_ADDRESS, id).then(nft => {\n      if (Math.floor((Date.now() - new Date(nft.timeLastUpdated))/60000) < 15 ) {\n        displayMessage('Metadata can be refreshed every 15 min.')\n      }\n      alchemyClient.nft.refreshNftMetadata(process.env.REACT_APP_ERC721_TOKEN_ADDRESS, id);\n    });\n  }\n\n  function displayMessage(message){\n    setHeaderMessage(message);\n    setShowMessage(true);  \n  }\n\n  function extractMessage(message) {\n    if (message == null) return \"Failed to execute transaction.\";\n\n    let startIndex = message.indexOf('execution reverted:');\n    if (startIndex > 0)\n    {\n      let userMessage = message.substring(startIndex + 20);\n      return userMessage.substring(0, userMessage.indexOf('\"'))\n    }\n\n    if (message.length > 100) return \"Failed to execute transaction.\";\n\n    return message;\n  }\n\n  return (\n    <>\n    { loaded ? (\n      <div className=\"row my-3\">\n        <div className=\"col-md-12\">\n          <div className=\"card py-3  item-details-container\">\n            <div className=\"px-3\">\n                <Alert variant=\"secondary\" show={showMessage} onClose={() => setShowMessage(false)} dismissible>\n                  <p className=\"mb-0\">\n                      {headerMessage}\n                  </p>\n                </Alert> \n              </div>            \n              <div className=\"px-3\">\n                <Link className=\"btn btn-primary py-1\" to=\"/\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" fill=\"currentColor\" className=\"bi bi-caret-left-fill\" viewBox=\"0 0 18 18\">\n                    <path d=\"m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z\"/>\n                  </svg> \n                  My Gallery\n                </Link>\n                <button type=\"button\" className=\"btn btn-light action-btn py-1 align-right\" onClick={refreshMetadata} disabled={!owned} >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" fill=\"currentColor\" className=\"bi bi-arrow-clockwise\" viewBox=\"0 0 18 18\">\n                      <path fillRule=\"evenodd\" d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z\"/>\n                      <path d=\"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z\"/>\n                    </svg>                            \n                    Refresh Metadata\n                </button>\n              </div>\n            <div className=\"card-body py-2\">\n              <div className=\"row\">\n                <div className=\"col-md-4\">\n                  <div className=\"mb-3 card item-card\" style={{backgroundColor: \"#\"+metadata?.background_color}}>\n                    <LazyLoadImage placeholderSrc={LoadingImage} src={metadata?.image} className=\"img-fluid\" alt=\"\" />\n                  </div>\n                </div>\n                <div className=\"col-md-8 px-1\">\n                  <div className=\"row\">\n                    <div className=\"col-md-12\">\n                      <div className=\"row px-2\">\n                        <div className=\"col-md-12\"><h3>{ metadata?.name }</h3></div>\n                      </div>\n                      <div className=\"row px-2\">\n                        <div className=\"col-md-12\"><p>{ metadata?.description}</p></div>\n                      </div>\n                      <div className=\"row px-2\">\n                          <p>  Owned by: <b>{owned ? 'You' : owner?.slice(-6).toUpperCase()}</b> </p>\n                      </div>     \n                      {\n                        reward > 0 ?\n                          (<div className=\"row px-2\">\n                          <p>  Staking Rewards: <b>{reward}</b> </p>\n                          </div> )\n                          : <></>\n                      }\n                      <div className=\"row px-3\">\n                        {metadata?.attributes.map((attribute, index) => (\n                          <div className=\"col-md-4 mb-2 px-1\" key={index}>\n                            <TokenAttribute attribute={attribute} />\n                          </div>\n                        ))}\n                      </div>\n                      <div className=\"row\">\n                        <div className=\"col-md-12\">\n                          <div className=\"btn-group\" role=\"group\">\n                            {\n                            loaded && owned && !staked ? (\n                              <button type=\"button\" className=\"btn btn-secondary action-btn px-4 mx-2\" onClick={handleShowStakeItemModalBtn}>\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" fill=\"currentColor\" className=\"bi bi-lock-fill\" viewBox=\"0 0 19 19\">\n                                  <path d=\"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z\"/>\n                                </svg>                                                          \n                                Stake\n                              </button>) \n                            : <></>\n                            }\n                            {\n                            loaded && owned && staked ? (\n                              <button type=\"button\" className=\"btn btn-secondary action-btn px-4 mx-2\" onClick={handleShowUnstakeItemModalBtn}>\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" fill=\"currentColor\" className=\"bi bi-emoji-smile-fill\" viewBox=\"0 0 19 19\">\n                                  <path d=\"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zM4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8z\"/>\n                                </svg>                          \n                                Unstake\n                              </button>) \n                            : <></>\n                            }                                                           \n                            {\n                            loaded && owned && staked ? (\n                              <button type=\"button\" className=\"btn btn-danger action-btn px-4 mx-2\" onClick={handleShowUnlockItemModalBtn}>\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" fill=\"currentColor\" className=\"bi bi-unlock-fill\" viewBox=\"0 0 19 19\">\n                                  <path d=\"M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5V3a3 3 0 0 1 6 0v4a.5.5 0 0 1-1 0V3a2 2 0 0 0-2-2z\"/>\n                                </svg>                              \n                                Emergecy Unlock\n                              </button>) \n                            : <></>\n                            } \n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <Modal show={stakeCoinModalVisibility} onHide={() => setStakeCoinModalVisibility(false)} centered>\n          <Modal.Header closeButton>\n            <Modal.Title>Stake The Coin</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <span>Staking this coin will put it into locked status. Locked coins can not transfered or interacted with. You can unstake the coin at any time.<br/>\n            Are you sure you want to proceed?\n            </span> \n            <br/>\n            <span className=\"text-danger\">{inputErrors}</span>\n          </Modal.Body>\n          <Modal.Footer className=\"text-center mx-auto input-modal-footer\">\n            <Button variant=\"danger\" onClick={stakeItem} disabled={modalActionsDisabled} >\n              Stake\n            </Button>\n            <Button variant=\"secondary\" onClick={() => setStakeCoinModalVisibility(false)} disabled={modalActionsDisabled} >\n              Cancel\n            </Button>\n          </Modal.Footer>\n        </Modal>\n\n        <Modal show={unstakeCoinModalVisibility} onHide={() => setUnstakeCoinModalVisibility(false)} centered>\n          <Modal.Header closeButton>\n            <Modal.Title>Unstake The Coin</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <span>Unstaking this coin will reduce the coin's Grade, but will reward you with {reward} Emojis <br/> \n            Are you sure you want to proceed?\n            </span> \n            <br/>\n            <span className=\"text-danger\">{inputErrors}</span>\n          </Modal.Body>\n          <Modal.Footer className=\"text-center mx-auto input-modal-footer\">\n            <Button variant=\"danger\" onClick={unstakeItem} disabled={modalActionsDisabled} >\n              Unstake\n            </Button>\n            <Button variant=\"secondary\" onClick={() => setUnstakeCoinModalVisibility(false)} disabled={modalActionsDisabled} >\n              Cancel\n            </Button>\n          </Modal.Footer>\n        </Modal> \n\n        <Modal show={unlockCoinModalVisibility} onHide={() => setUnlockCoinModalVisibility(false)} centered>\n          <Modal.Header closeButton>\n            <Modal.Title>Unlock The Coin</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <span>Emergency unlock will discard all accumulated stake rewards and will unlock this coin. Coin's grade will NOT be reduced.<br/> \n            Are you sure you want to proceed?\n            </span> \n            <br/>\n            <span className=\"text-danger\">{inputErrors}</span>\n          </Modal.Body>\n          <Modal.Footer className=\"text-center mx-auto input-modal-footer\">\n            <Button variant=\"danger\" onClick={unlockItem} disabled={modalActionsDisabled} >\n              Unlock\n            </Button>\n            <Button variant=\"secondary\" onClick={() => setUnlockCoinModalVisibility(false)} disabled={modalActionsDisabled} >\n              Cancel\n            </Button>\n          </Modal.Footer>\n        </Modal>                 \n        \n      </div>\n    ) : (<></>\n    )}\n      \n    </>\n  );\n}\n\nexport default ItemDetails;","function TokenAttribute( {attribute} ) {\n  return (\n    <>\n    <div className=\"card\">\n        <div className=\"card-body card-body-tight\">\n            <h6 className=\"token-title card-subtitle text-muted text-center\">{ attribute.trait_type ? attribute.trait_type : 'Property' }</h6>\n            <h5 className=\"token-value text-center\">{ attribute.value }</h5>\n        </div>\n    </div>\n    </>\n  );\n}\n\nexport default TokenAttribute;","export default __webpack_public_path__ + \"static/media/loading.c7d9f081.gif\";","import { Link } from \"react-router-dom\";\n\nimport \"../assets/css/Home.css\";\n\n\nfunction Navbar( { connectWallet} ) {\n  return (\n    <>\n    <nav className=\"navbar navbar-dark navbar-expand-lg bg-dark\">\n        <div className=\"container\">\n            <Link className=\"navbar-brand\" to=\"/\"><i>EmojiCoins Staking</i></Link>\n            <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                <span className=\"navbar-toggler-icon\"></span>\n            </button>\n            <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n                <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">    \n                </ul>\n                <div className=\"d-flex\" role=\"search\">\n                    {connectWallet}\n                </div>\n            </div>\n        </div>\n    </nav>\n    </>\n  );\n}\n\nexport default Navbar;","import { ethers } from \"ethers\";\n\nimport abi from \"../contracts/erc20.json\";\n\nconst polygonProvider = new ethers.providers.Web3Provider(window.ethereum);\nconst signer = polygonProvider.getSigner();\nconst contract = new ethers.Contract(process.env.REACT_APP_ERC20_TOKEN_ADDRESS, abi, signer)\n\nexport async function approve(address, value){\n    try {\n        const data = await contract.approve(address, value)\n        await polygonProvider.waitForTransaction(data.hash)\n        return '1';\n    } catch (error) {\n        console.log(error)\n        return error;\n    }\n}\n\nexport async function getOwnedEmojis(address){\n    const data = await contract.balanceOf(address);\n    return data;\n}","import { useState, useEffect } from 'react';\nimport { providers } from \"ethers\";\nimport Web3Modal from 'web3modal'\nimport { getOwnedEmojis } from \"../lib/erc20\";\nimport { getOwnedTokens } from \"../lib/erc721\";\nimport Toast from 'react-bootstrap/Toast';\n\nfunction ConnectWallet({ onAccountConnect }) {\n    const [web3Modal, setWeb3Modal] = useState(null);\n    const [address, setAddress] = useState(\"\");\n    const [emojis, setEmojis] = useState(0);\n    const [emojiTokens, setEmojiTokens] = useState(null);\n    const [show, setShow] = useState(false);\n\n    useEffect(() => {\n    \n        const newWeb3Modal = new Web3Modal({\n          cacheProvider: true, \n          network: \"mainnet\",\n        });\n    \n        setWeb3Modal(newWeb3Modal)\n    }, [])\n\n    useEffect(() => {\n        if(web3Modal && web3Modal.cachedProvider){\n          connectWallet()\n        }\n    }, [web3Modal])\n\n    async function connectWallet() {\n      const provider = await web3Modal.connect();\n      addListeners(provider);\n      const ethersProvider = new providers.Web3Provider(provider)\n      ethersProvider.getSigner().getAddress().then(userAddress => {\n        setAddress(userAddress)\n        onAccountConnect(userAddress);\n      });\n    }\n\n    async function disconnectWallet(){\n        await web3Modal.clearCachedProvider();\n        setAddress(\"\")\n    }\n\n    async function showBalances(){\n      setBalances(address);\n      setShow(true);\n    }    \n\n    async function setBalances(userAddress){\n      getOwnedEmojis(userAddress).then(data => {\n          //setEmojis(data / 1000000000000000000);\n          setEmojis(Math.round(data / 10000000000000000) / 100);\n      });\n      getOwnedTokens(userAddress).then(data => {\n          setEmojiTokens(data.toString());\n      });\n    }\n\n    async function addListeners(web3ModalProvider) {\n          web3ModalProvider.on(\"accountsChanged\", (accounts) => {\n          window.location.reload()\n        });\n        \n        // Subscribe to chainId change\n        web3ModalProvider.on(\"chainChanged\", (chainId) => {\n          window.location.reload()\n        });\n    }\n\n    return (\n      <>\n        { address ? (\n          <>\n              <Toast onClose={() => setShow(false)} show={show} delay={5000} autohide>\n                <Toast.Body><div><div className=\"mx-4 toast-row\">{emojis} Emojis</div><div className=\"mx-4 toast-row\">{emojiTokens} Emoji Coins</div></div></Toast.Body>\n              </Toast>\n              <button className=\"btn btn-outline-danger mx-2\" type=\"button\" onClick={disconnectWallet}>Disconnect {address.slice(-6).toUpperCase()}</button> \n              <button className=\"btn btn-outline-secondary mx-2\" type=\"button\" onClick={() => showBalances()}>Show Balance</button>\n          </>\n              \n        ): (\n          <button type=\"button\" className=\"btn btn-outline-success\" onClick={connectWallet}>Connect Wallet</button>\n        )}\n      </>\n    );\n}\n\nexport default ConnectWallet;\n","import \"../assets/css/base.css\";\r\n\r\nfunction Footer() {\r\n  return (\r\n    <>\r\n    <div>\r\n      <footer className=\"py-1 bg-dark fixed-bottom footer\">\r\n        <div className=\"container\">\r\n          <p className=\"m-0 text-center text-white\">\r\n            &copy; 2021 - 2022 EmojiCoins\r\n          </p>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Footer;","import { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"../assets/css/Item.css\";\n\n\nfunction Item( {token} ) {\n  const [ metadata, setMetdata ] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(()=> {\n    if (token?.rawMetadata){\n      let meta = token.rawMetadata;\n      if (meta?.image){\n        meta.image = meta.image.replace(\"ipfs://\", \"https://gateway.ipfs.io/ipfs/\");\n      }\n      setMetdata(meta)\n    }\n  },[token])\n\n  function navigateToItem(){\n    navigate(`/items/${token.tokenId}`);\n  }\n  return (\n    <div className=\"card my-3 item-card\" onClick={navigateToItem}>\n    <div className=\"card-header\" style={{backgroundColor: \"#\"+metadata?.background_color}}>\n      <img src={metadata?.image} className=\"card-img-top\" alt=\"...\"/>\n    </div>\n    \n    <div className=\"card-body\">\n      <h5 className=\"card-title\">{metadata?.name}</h5>\n    </div>\n  </div>\n  );\n}\n\nexport default Item;\n","import { useEffect, useState } from \"react\";\nimport Pagination from 'react-bootstrap/Pagination';\n\nimport Item from \"./Item\";\n\nfunction ItemList( {tokens, totalCount, accountConnected} ) {\n  const [ pagedTokens, setPagedTokens] = useState([]);\n  const [ paginationItem, setPaginationItems ] = useState(null);\n\n  useEffect(() => {\n    \n    setPagedTokens(tokens.slice(0, process.env.REACT_APP_PER_PAGE_COUNT));\n    updatePagination(1)\n  }, [tokens])\n\n  function fetchPage(e){\n    const latestPage = e.target.innerText ? parseInt(e.target.innerText): 1;\n    setPagedTokens(tokens.slice((process.env.REACT_APP_PER_PAGE_COUNT*(latestPage-1)),process.env.REACT_APP_PER_PAGE_COUNT*latestPage ))\n\n    updatePagination(latestPage)\n  }\n\n  function updatePagination(latestPage){\n    let pagesCount = Math.ceil(totalCount/ process.env.REACT_APP_PER_PAGE_COUNT)\n    let items = [];\n    for (let number = 1; number <= pagesCount; number++) {\n      items.push(\n        <Pagination.Item key={number} active={number === latestPage} onClick={fetchPage}>\n          {number}\n        </Pagination.Item>,\n      );\n    }\n\n    setPaginationItems(items);\n  }\n\n  return (\n    <>\n      <div className=\"row\">\n        {tokens.length > 0 ? \n          pagedTokens.map((token, index) => (\n            <div className=\"col-md-3\" key={index}>\n                <Item token={token}/>\n            </div>\n          )) : (\n            <></>\n        )}\n        {tokens.length > process.env.REACT_APP_PER_PAGE_COUNT ? (\n          <Pagination className=\"justify-content-center\">{paginationItem}</Pagination>\n          ) : (\n            <></>\n        )}\n        {accountConnected === null ? (\n          <div>Please connect you Metamask wallet.</div>\n          ) : (\n            <></>\n        )}\n        {accountConnected != null && tokens.length === 0 ? (\n          <div>You have no items in your gallery.</div>\n          ) : (\n            <></>\n        )}\n            \n      </div>\n    </>\n  );\n}\n\nexport default ItemList;","import { useState, useEffect } from \"react\";\nimport alchemyClient from \"../lib/alchemyClient\";\nimport ItemList from \"../components/ItemList\";\nimport \"../assets/css/Home.css\";\n\n\nfunction Home( { accountConnected} ) {\n\n  const [ ownedTokens, setOwnedTokens ] = useState([]);\n  const [ totalCount, setTotalCount ] = useState(0);\n \n  useEffect(() => {\n    if (accountConnected){\n      async function fetchData(){\n        let pageKey = \"  \";\n        let tokens = [];\n        let totalCount = 0;\n        while (pageKey){\n          let r = await alchemyClient.nft.getNftsForOwner(accountConnected, {pageKey:pageKey, contractAddresses:[process.env.REACT_APP_ERC721_TOKEN_ADDRESS]});\n          pageKey = r.pageKey;\n          let filtered = r.ownedNfts.filter(function (e) {\n            return e.rawMetadata.attributes.some(item => item.value === 'Stakeable');\n          });\n          tokens.push(...filtered);\n          totalCount += filtered.length;\n          setTotalCount(totalCount);\n        }\n        setOwnedTokens(tokens);\n      }\n      fetchData();\n    }\n    \n  }, [accountConnected])\n\n\n  return (\n    <>\n      <div className=\"row my-3\">\n        <div className=\"col-md-12\">\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <ItemList tokens={ownedTokens} totalCount={totalCount} accountConnected={accountConnected} />\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </>\n  );\n}\n\nexport default Home;\n","import { useState } from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\n\nimport Navbar from \"./components/Navbar\";\nimport ConnectWallet from \"./components/ConnectWallet\";\nimport Footer from \"./components/Footer\";\n\nimport Home from \"./views/Home\";\nimport ItemDetails from \"./views/ItemDetails\";\n\nfunction App() {\n  const [ accountConnected, setAccountConnected] = useState(null);\n\n  function handleOnAccountConnect(val){\n    setAccountConnected(val);\n  }\n\n  return (\n    <>\n      <Navbar connectWallet={<ConnectWallet onAccountConnect={handleOnAccountConnect}/>}/>\n      <div className=\"container\">\n        <Routes>\n          <Route path=\"/\" element={<Home accountConnected={accountConnected}/>} />\n          <Route path=\"items/:id\" element={<ItemDetails accountConnected={accountConnected}/>} />\n        </Routes>\n      </div>\n      <Footer />\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { HashRouter } from \"react-router-dom\";\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'bootstrap/dist/js/bootstrap.min.js'\nimport \"./assets/css/base.css\"\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <HashRouter>\n        <App />\n    </HashRouter>\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { Network, Alchemy } from \"alchemy-sdk\";\n\nconst settings = {\n    apiKey: process.env.REACT_APP_ALCHEMY_API_KEY,\n    network: Network.MATIC_MAINNET,\n};\n\nconst alchemy = new Alchemy(settings);\n\nexport default alchemy;","import { ethers } from \"ethers\";\nimport abi from \"../contracts/staking.json\";\nimport alchemyClient from \"./alchemyClient\";\n\nconst polygonProvider = new ethers.providers.Web3Provider(window.ethereum);\nconst signer = polygonProvider.getSigner();\nconst contract = new ethers.Contract(process.env.REACT_APP_STAKING_ADDRESS, abi, signer)\n\nexport async function emergencyWithdrawStake(tokenId){\n    try {\n        const data = await contract.emergencyWithdrawStake(tokenId);\n        await polygonProvider.waitForTransaction(data.hash);\n        await alchemyClient.nft.refreshNftMetadata(process.env.REACT_APP_ERC721_TOKEN_ADDRESS, tokenId);\n        return '1';\n    } catch (error) {\n        console.error(error);\n        return error;\n    }\n}\n\nexport async function withdrawStake(tokenId){\n    try {\n        const data = await contract.withdrawStake(tokenId);\n        await polygonProvider.waitForTransaction(data.hash);\n        await alchemyClient.nft.refreshNftMetadata(process.env.REACT_APP_ERC721_TOKEN_ADDRESS, tokenId);\n        return '1';\n    } catch (error) {\n        console.error(error);\n        return error;\n    }\n}\n\nexport async function stake(tokenId){\n    try {\n        const data = await contract.stake(tokenId);\n        await polygonProvider.waitForTransaction(data.hash);\n        await alchemyClient.nft.refreshNftMetadata(process.env.REACT_APP_ERC721_TOKEN_ADDRESS, tokenId);\n        return '1';\n    } catch (error) {\n        console.error(error);\n        return error;\n    }\n}\n\nexport async function calculateStakeReward(id){\n    const data = await contract.calculateStakeReward(id);\n    return data;\n}\n\nexport async function isStaked(id){\n    const data = await contract.isStaked(id);\n    return data;\n}","import { ethers } from \"ethers\";\n\nimport abi from \"../contracts/erc721.json\";\n\nconst polygonProvider = new ethers.providers.Web3Provider(window.ethereum);\nconst signer = polygonProvider.getSigner();\nconst contract = new ethers.Contract(process.env.REACT_APP_ERC721_TOKEN_ADDRESS, abi, signer)\n\nexport async function getOwnedTokens(address){\n    const data = await contract.balanceOf(address);\n    return data;\n}\n\nexport async function getTokenURI(id){\n    const data = await contract.tokenURI(id);\n    return data;\n}\n\nexport async function getOwnerOf(id){\n    const data = await contract.ownerOf(id);\n    return data;\n}\n\nexport async function approvenft(address, value){\n    try {\n        const data = await contract.approve(address, value)\n        await polygonProvider.waitForTransaction(data.hash)\n        return '1';\n    } catch (error) {\n        console.log(error)\n        return error;\n    }\n}"],"sourceRoot":""}